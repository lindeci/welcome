# Do not edit this file manually!
# It will be overwritten by the ALTER SYSTEM command.


wal_compression = 'on'                          # 启用 WAL 日志压缩
log_min_duration_statement = '10ms'            # 记录执行时间超过 10 毫秒的 SQL 语句
checkpoint_timeout = '30min'                   # 检查点完成前的最长等待时间为 30 分钟（修改需要重启数据库）
shared_preload_libraries = 'pg_stat_statements,pageinspect'  # 在启动时加载的共享预加载库（修改需要重启数据库）
pg_stat_statements.max = '1000'                # pg_stat_statements 中保留的最大 SQL 语句数量
pg_stat_statements.track = 'all'               # 对所有语句进行跟踪统计
pg_stat_log.max = '1024'                       # pg_stat_log 中保留的最大日志条目数量
pg_stat_log.track = 'all'                      # 跟踪所有查询的日志记录
pg_stat_log.track_utility = 'true'             # 跟踪系统命令的日志记录
wal_keep_size = '1600MB'                       # 保留用于流复制的 WAL 日志大小为 1600MB
logging_collector = 'on'                       # 启用日志收集器（修改需要重启数据库）
log_destination = 'csvlog'                     # 日志输出格式为 CSV 文件（修改需要重启数据库）
archive_mode = 'on'                            # 启用归档模式
archive_command = 'DATE=`date +%Y%m%d`;DIR="/back/$DATE";(test -d $DIR || mkdir -p $DIR)&&cp %p $DIR/%f'  # 设置归档命令用于归档日志

restore_command = 'DATE=`date +%Y%m%d`;DIR="/back/$DATE";cp $DIR/%f %p'  # 设置还原命令用于恢复归档日志
recovery_target_time = '2023-05-02 07:54:54'   # 设置恢复的目标时间点
recovery_target_timeline = 'latest'            # 恢复时使用最新的时间线

-----------------------------------------------------------------------------
postsql.conf中的内容
cat postgresql.conf | egrep '^[a-zA-Z]'
listen_addresses = '*'                    # 哪些 IP 地址监听连接请求；使用 '*' 表示监听所有地址
port = 5432                              # 监听端口号（修改需要重启数据库）
max_connections = 200                    # 允许的最大客户端连接数（修改需要重启数据库）
shared_buffers = 128MB                   # 共享内存缓冲区大小，最小为 128kB（修改需要重启数据库）
dynamic_shared_memory_type = posix       # 动态共享内存类型，默认为第一个选项
max_wal_size = 1GB                       # WAL 日志最大大小（修改需要重启数据库）
min_wal_size = 80MB                      # WAL 日志最小大小（修改需要重启数据库）
log_timezone = 'PRC'                     # 日志时区设置为中国标准时间（Asia/Shanghai）
datestyle = 'iso, ymd'                   # 日期样式设置为 'ISO, 年月日' 格式
timezone = 'PRC'                         # 时区设置为中国标准时间（Asia/Shanghai）
lc_messages = 'zh_CN.UTF8'               # 系统错误消息的本地化设置为中文 UTF-8
lc_monetary = 'zh_CN.UTF8'               # 货币格式化本地化设置为中文 UTF-8
lc_numeric = 'zh_CN.UTF8'                # 数字格式化本地化设置为中文 UTF-8
lc_time = 'zh_CN.UTF8'                   # 时间格式化本地化设置为中文 UTF-8
default_text_search_config = 'pg_catalog.simple'  # 全文搜索默认配置为 pg_catalog.simple

wal_compression = 'on'                          # 启用 WAL 日志压缩
log_min_duration_statement = '10ms'            # 记录执行时间超过 10 毫秒的 SQL 语句
checkpoint_timeout = '30min'                   # 检查点完成前的最长等待时间为 30 分钟（修改需要重启数据库）
shared_preload_libraries = 'pg_stat_statements,pageinspect'  # 在启动时加载的共享预加载库（修改需要重启数据库）
pg_stat_statements.max = '1000'                # pg_stat_statements 中保留的最大 SQL 语句数量
pg_stat_statements.track = 'all'               # 对所有语句进行跟踪统计
pg_stat_log.max = '1024'                       # pg_stat_log 中保留的最大日志条目数量
pg_stat_log.track = 'all'                      # 跟踪所有查询的日志记录
pg_stat_log.track_utility = 'true'             # 跟踪系统命令的日志记录
wal_keep_size = '1600MB'                       # 保留用于流复制的 WAL 日志大小为 1600MB
logging_collector = 'on'                       # 启用日志收集器（修改需要重启数据库）
log_destination = 'csvlog'                     # 日志输出格式为 CSV 文件（修改需要重启数据库）
archive_mode = 'on'                            # 启用归档模式
archive_command = 'DATE=`date +%Y%m%d`;DIR="/back/$DATE";(test -d $DIR || mkdir -p $DIR)&&cp %p $DIR/%f'  # 设置归档命令用于归档日志


restore_command = 'DATE=`date +%Y%m%d`;DIR="/back/$DATE";cp $DIR/%f %p'  # 设置还原命令用于恢复归档日志
recovery_target_time = '2023-08-10 00:00:00'   # 设置恢复的目标时间点
recovery_target_timeline = 'latest'            # 恢复时使用最新的时间线

